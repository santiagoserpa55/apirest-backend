<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Challenge199ca</title>
</head>
<body>
  <main>
    <ul id="unorderedlist">
    </ul>
    <script>
      const employes = document.getElementById('unorderedlist');
      //traer datos
      document.addEventListener("DOMContentLoaded", e => {
        fetchData();
      })
      const fetchData = async () => {
        try {
          const res = await fetch('https://usersantiago.onrender.com/api/getAll');
          const data = await res.json()
          empl(data);
        } catch (error) {
          console.log("errorsesr", error);
        }
      }
      const empl = data => {
        let elementos = '';
        data.forEach(item => {
          elementos += `<li>${item.name}</li>`
        });
        unorderedlist.innerHTML = elementos;
      }
      //fin traer traer datos
      const URL_ADD = "https://usersantiago.onrender.com/api"
      function collecData(e) {
        e.preventDefault();
        const name = document.getElementById("name").value
          const employe = {
            name: name,
          }
          const dataTosend = JSON.stringify(employe);
          save(dataTosend);
        }
      function save(data) {
        fetch(URL_ADD, {
          method: "GET",
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then(response => {
            if (response.ok)
              return response.text()
            else
              throw new Error(response.text());
          })
          .catch(error => {
            console.error("ERROR: ", error.message);
            handleError(error.message);
          });
      }
    </script>
    <form action="https://usersantiago.onrender.com/api">
      <input name="name" length="0" placeholder="Employee Name"/>
      <button type="submit" id="add">Add</button>
    </form>
    <br>
    
    <form action="https://usersantiago.onrender.com/api" method="get">
      <input type="hidden" name="kill">
      <button type="submit" id="kill">Kill All</button>
    </form>
  </main>
  <style>
    main {
      text-align: center;
    }
  </style>
 
</body>

</html>