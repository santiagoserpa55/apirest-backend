

  <ul></ul>
  <form action="https://usersantiago.onrender.com/api">
    <input name="name" length="0" placeholder="Employee Name" />
    <button type="submit" id="add">Add</button>
  </form>
  <br>
  <form action="https://usersantiago.onrender.com/api" method="get">
    <input type="hidden" name="kill">
    <button type="submit" id="kill">Kill All</button>
  </form>
  <style>
    body {
      text-align: center;
    }
  </style>

<script>
  const employes = document.querySelector('ul');
  //traer datos
  document.addEventListener("DOMContentLoaded", e => {
    fetchData();
  })
  //et
  const fetchData = async () => {
    try {
      const res = await fetch('https://usersantiago.onrender.com/api/getAll');
      const data = await res.json()
      empl(data);
    } catch (error) {
      console.log("errorsesr", error);
    }
  }
  const empl = data => {
    let elementos = '';
    data.forEach(item => {
      elementos += `<li>${item.name}</li>`
    });
    employes.innerHTML = elementos;
  }
  //fin traer traer datos
  const URL_ADD = "https://usersantiago.onrender.com/api"
  function collecData(e) {
    e.preventDefault();
    const name = document.getElementById("name").value
      const employe = {
        name: name,
      }
      const dataTosend = JSON.stringify(employe);
      save(dataTosend);
    }
  function save(data) {
    fetch(URL_ADD, {
      method: "GET",
      headers: {
        "Content-Type": "application/json",
      },
    })
      .then(response => {
        if (response.ok)
          return response.text()
        else
          throw new Error(response.text());
      })
      .catch(error => {
        console.error("ERROR: ", error.message);
        handleError(error.message);
      });
  }
</script>
